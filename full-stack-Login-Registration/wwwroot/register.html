<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>Register</h1>

    <div id="app"></div>

    <script>
        updateView();

        function updateView()
        {
            app.innerHTML = `

            <label for="username">Username:</label>
            <input type="text" id="username"> <br>

            <label for="password">Password:</label>
            <input type="password" id="password"> <br>

            <button onclick="registerUser()">Register</button>
            `
        };

        async function registerUser()
        {
            const usernameInput = document.getElementById("username");
            const passwordInput = document.getElementById("password");

            const newUser = {
                //id: "069eb670-52a1-4d0d-aa26-11b5ab2bb76f", // Just for testing atm.
                username: usernameInput.value,
                password: passwordInput.value
            };

            const response = await fetch("/register", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(newUser)
            });

            if (response.status == 201) {
                location.href = "/index.html";
            }
            else {
                location.href = "/register.html";
            }
        }
    </script>   
</body>
</html>